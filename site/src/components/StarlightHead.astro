---
import DefaultHead from "@astrojs/starlight/components/Head.astro";

import "../styles/fonts.css";
---

<link
  rel="preload"
  href="/fonts/Erewhon-Math.otf"
  as="font"
  type="font/otf"
  crossorigin
/>
<script is:inline>
  (() => {
    const root = document.documentElement;

    // Bootstrap semantic theme state for first paint.
    // This avoids a boot-time "animate into dark" when the user is already in dark mode.
    // ThemeManager will take over and keep this in sync.
    root.setAttribute("data-axm-motion", "tau");

    const theme = root.getAttribute("data-theme");
    const mode = theme === "dark" || theme === "light" ? theme : "system";
    const systemResolved = matchMedia("(prefers-color-scheme: dark)").matches
      ? "dark"
      : "light";
    const resolved = mode === "system" ? systemResolved : mode;

    root.setAttribute("data-axm-mode", mode);
    root.setAttribute("data-axm-resolved-mode", resolved);
  })();
</script>
<script>
  import { initStarlightAxiomatic } from "../lib/starlight-axiomatic";

  initStarlightAxiomatic();
</script>
<DefaultHead {...Astro.props} />
