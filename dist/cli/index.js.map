{"version":3,"sources":["../../src/cli/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["#!/usr/bin/env node\nimport { existsSync, readFileSync, writeFileSync } from \"node:fs\";\nimport { join, resolve } from \"node:path\";\nimport { generateTokensCss } from \"../lib/generator.ts\";\nimport { getKeyColorStats, solve } from \"../lib/index.ts\";\nimport type { SolverConfig } from \"../lib/types.ts\";\nimport { DEFAULT_CONFIG } from \"./default-config.ts\";\n\nconst args = process.argv.slice(2);\nconst CWD = process.cwd();\n\nif (import.meta.main) {\n  if (args[0] === \"init\") {\n    const targetPath = join(CWD, \"color-config.json\");\n    if (existsSync(targetPath)) {\n      console.error(\"Error: color-config.json already exists.\");\n      process.exit(1);\n    }\n    writeFileSync(targetPath, JSON.stringify(DEFAULT_CONFIG, null, 2));\n    console.log(\"Created color-config.json\");\n    console.log(\"Run `color-system` to generate your theme.\");\n    process.exit(0);\n  }\n\n  const CONFIG_PATH = args[0]\n    ? resolve(CWD, args[0])\n    : join(CWD, \"color-config.json\");\n\n  const BASE_CSS_PATH = args[1]\n    ? resolve(CWD, args[1])\n    : join(CWD, \"theme.css\");\n\n  if (!args[0] && !args[1]) {\n    // Check if default config exists, if not, warn\n    try {\n      readFileSync(CONFIG_PATH);\n    } catch {\n      console.error(\n        \"No config file found at default location: ./color-config.json\"\n      );\n      console.error(\"Usage: color-system [config-file] [output-file]\");\n      console.error(\"   or: color-system init\");\n      process.exit(1);\n    }\n  }\n\n  console.log(\"Reading config from:\", CONFIG_PATH);\n  const config = JSON.parse(readFileSync(CONFIG_PATH, \"utf8\")) as SolverConfig;\n\n  console.log(\"Solving surfaces...\");\n  const { backgrounds } = solve(config);\n\n  console.log(\"Generating CSS...\");\n  let css = generateTokensCss(\n    config.groups,\n    backgrounds,\n    config.hueShift,\n    config.borderTargets\n  );\n\n  const stats = getKeyColorStats(config.anchors.keyColors);\n  if (stats.chroma !== undefined || stats.hue !== undefined) {\n    const vars: string[] = [];\n    if (stats.chroma !== undefined)\n      vars.push(`  --chroma-brand: ${stats.chroma};`);\n    if (stats.hue !== undefined) vars.push(`  --hue-brand: ${stats.hue};`);\n\n    if (vars.length > 0) {\n      css = `:root {\\n${vars.join(\"\\n\")}\\n}\\n\\n` + css;\n    }\n  }\n\n  console.log(\"Writing CSS to:\", BASE_CSS_PATH);\n  writeFileSync(BASE_CSS_PATH, css);\n  console.log(\"Done!\");\n}\n"]}